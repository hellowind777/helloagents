{
  "_comment": "HelloAGENTS Claude Code Hooks 参考配置（非直接使用）。实际部署由 installer.py 的 _configure_claude_hooks() 程序化写入 .claude/settings.json，{SCRIPTS_DIR} 等占位符会被替换为实际路径。手动配置时需将 {SCRIPTS_DIR} 替换为 helloagents 模块的 scripts/ 绝对路径。",
  "hooks": {
    "SessionStart": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "helloagents --check-update --silent",
            "timeout": 5,
            "description": "HelloAGENTS 版本更新提示"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"{SCRIPTS_DIR}/inject_context.py\"",
            "timeout": 3,
            "description": "HelloAGENTS 主代理规则强化（CLAUDE.md 关键规则注入）"
          }
        ]
      }
    ],
    "SubagentStart": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"{SCRIPTS_DIR}/inject_context.py\"",
            "timeout": 5,
            "description": "HelloAGENTS 子代理上下文自动注入（方案包上下文）"
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "matcher": "general-purpose",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"{SCRIPTS_DIR}/ralph_loop.py\"",
            "timeout": 120,
            "description": "HelloAGENTS 质量验证循环（Ralph Loop）"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write|Edit|NotebookEdit",
        "hooks": [
          {
            "type": "command",
            "command": "echo \"[HelloAGENTS] PostToolUse: write operation completed\"",
            "async": true,
            "description": "HelloAGENTS 进度快照触发（写操作计数，超过5次阈值时生成快照）"
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "echo \"[HelloAGENTS] Session ending: triggering KB sync and L2 summary write\"",
            "async": true,
            "description": "HelloAGENTS KB 同步 + L2 会话摘要写入"
          }
        ]
      }
    ],
    "TeammateIdle": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "echo \"[HelloAGENTS] TeammateIdle: teammate about to go idle, checking shared task list\"",
            "async": true,
            "description": "HelloAGENTS Agent Teams 空闲检测（teammate 即将空闲时检查共享任务列表）"
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "echo \"[HelloAGENTS] PreCompact: saving progress snapshot before context compaction\"",
            "async": false,
            "description": "HelloAGENTS 上下文压缩前自动保存进度快照"
          }
        ]
      }
    ]
  }
}
