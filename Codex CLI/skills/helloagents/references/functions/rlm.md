# ~rlm å‘½ä»¤

> RLMï¼ˆRecursive Language Modelï¼‰é€’å½’è¯­è¨€æ¨¡å‹å‘½ä»¤

## æ ¸å¿ƒæ¶æ„

```yaml
ä¸Šä¸‹æ–‡ç®¡ç†:
  Working Context: CLI å†…å­˜ä¸­çš„å¯¹è¯ä¸Šä¸‹æ–‡
  Session Events: %TEMP%/helloagents_rlm/{session_id}/events.jsonl
  Memory: helloagents/ çŸ¥è¯†åº“

é€’å½’è°ƒç”¨:
  å®ç°: Task å·¥å…·
  æœ€å¤§æ·±åº¦: 5 å±‚
  ç»“æœ: æŠ˜å åè¿”å›

Session éš”ç¦»:
  æ¯ä¸ª CLI å®ä¾‹æœ‰å”¯ä¸€ Session ID

å¤š CLI åç«¯:
  æ£€æµ‹: ç¯å¢ƒå˜é‡ â†’ shutil.which â†’ é»˜è®¤ codex
  åç«¯: Codex | Claude Code | Gemini | Qwen | Grok
  æ‰§è¡Œ: Layer 1 åŸç”Ÿå­ä»£ç† â†’ Layer 2 è„šæœ¬è°ƒç”¨ â†’ Layer 3 ä¸»ä¸Šä¸‹æ–‡
```

## å‘½ä»¤è§¦å‘

```yaml
è§¦å‘æ–¹å¼:
  - ~rlm: æ˜¾ç¤ºRLMçŠ¶æ€å’Œå¸®åŠ©
  - ~rlm status: æ˜¾ç¤ºå½“å‰RLMçŠ¶æ€
  - ~rlm backend: æ˜¾ç¤ºå½“å‰ CLI åç«¯ä¿¡æ¯
  - ~rlm reload: é‡æ–°åŠ è½½ AGENTS.md è§„åˆ™ï¼ˆå‹ç¼©åæ¢å¤ï¼‰
  - ~rlm spawn <role> <task>: æ‰‹åŠ¨å¯åŠ¨å­ä»£ç†
  - ~rlm fold [strategy]: æ‰‹åŠ¨è§¦å‘ä¸Šä¸‹æ–‡æŠ˜å 
  - ~rlm context: æ˜¾ç¤ºä¸‰å±‚ä¸Šä¸‹æ–‡çŠ¶æ€
  - ~rlm history: æ˜¾ç¤ºä»£ç†æ‰§è¡Œå†å²
  - ~rlm session: æ˜¾ç¤ºå½“å‰ Session ä¿¡æ¯
  - ~rlm sessions: åˆ—å‡ºæ‰€æœ‰ Sessions
  - ~rlm reset: é‡ç½®RLMçŠ¶æ€

åä½œæ¨¡å¼å‘½ä»¤ï¼ˆéœ€å…ˆè®¾ç½® hellotasks ç¯å¢ƒå˜é‡ï¼‰:
  - ~rlm tasks: æ˜¾ç¤ºå…±äº«ä»»åŠ¡åˆ—è¡¨
  - ~rlm tasks available: æ˜¾ç¤ºå¯è®¤é¢†çš„ä»»åŠ¡
  - ~rlm tasks claim <task_id>: è®¤é¢†ä»»åŠ¡
  - ~rlm tasks complete <task_id>: æ ‡è®°ä»»åŠ¡å®Œæˆ
  - ~rlm tasks add "<subject>": æ·»åŠ æ–°ä»»åŠ¡
```

---

## å­å‘½ä»¤è¯¦è§£

### ~rlm / ~rlm help

æ˜¾ç¤ºRLMç³»ç»Ÿå¸®åŠ©ä¿¡æ¯ã€‚

**è¾“å‡ºå†…å®¹:**
```
ğŸ”µã€HelloAGENTSã€‘- RLM é€’å½’è¯­è¨€æ¨¡å‹

RLM æ˜¯åŸºäºé€’å½’æ‰§è¡Œå’Œä¸Šä¸‹æ–‡æŠ˜å çš„æ™ºèƒ½ä»£ç†æ¡†æ¶ã€‚

å¯ç”¨å‘½ä»¤:
  ~rlm status     æ˜¾ç¤ºRLMçŠ¶æ€ï¼ˆæ¨¡å¼ã€æ·±åº¦ã€æ´»è·ƒä»£ç†ï¼‰
  ~rlm spawn      å¯åŠ¨å­ä»£ç†æ‰§è¡Œä»»åŠ¡
  ~rlm fold       æ‰‹åŠ¨è§¦å‘ä¸Šä¸‹æ–‡æŠ˜å 
  ~rlm context    æ˜¾ç¤ºä¸‰å±‚ä¸Šä¸‹æ–‡çŠ¶æ€
  ~rlm history    æ˜¾ç¤ºä»£ç†æ‰§è¡Œå†å²
  ~rlm reset      é‡ç½®RLMçŠ¶æ€

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: è¾“å…¥å­å‘½ä»¤æŸ¥çœ‹è¯¦æƒ…ï¼Œæˆ–ç›´æ¥æè¿°ä»»åŠ¡è‡ªåŠ¨å¯ç”¨RLM
```

---

### ~rlm status

æ˜¾ç¤ºå½“å‰RLMç³»ç»ŸçŠ¶æ€ã€‚

**æ‰§è¡Œæ­¥éª¤:**

1. è·å–RLMå¼•æ“çŠ¶æ€
2. ç»Ÿè®¡æ´»è·ƒä»£ç†
3. è®¡ç®—ä¸Šä¸‹æ–‡ä½¿ç”¨ç‡
4. æ ¼å¼åŒ–è¾“å‡º

**è¾“å‡ºæ ¼å¼:**
```
ğŸ”µã€HelloAGENTSã€‘- RLM çŠ¶æ€

## ç³»ç»ŸçŠ¶æ€
- æ‰§è¡Œæ¨¡å¼: {STANDARD/RECURSIVE/PARALLEL}
- é€’å½’æ·±åº¦: {current_depth}/{max_depth}
- æ´»è·ƒä»£ç†: {active_count}

## ä¸Šä¸‹æ–‡çŠ¶æ€
| å±‚çº§ | å½“å‰å¤§å° | å®¹é‡ä¸Šé™ | ä½¿ç”¨ç‡ |
|------|----------|----------|--------|
| Working | {size} | 8K | {percent}% |
| Session | {size} | 32K | {percent}% |
| Memory | {size} | æ— é™ | - |

## æ´»è·ƒä»£ç†åˆ—è¡¨
{agent_list or "æ— æ´»è·ƒä»£ç†"}

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: ~rlm spawn å¯åŠ¨ä»£ç† | ~rlm fold å‹ç¼©ä¸Šä¸‹æ–‡
```

---

### ~rlm backend

æ˜¾ç¤ºå½“å‰ CLI åç«¯ä¿¡æ¯ã€‚

**è¾“å‡ºæ ¼å¼:**
```
ğŸ”µã€HelloAGENTSã€‘- RLM: backend

åç«¯: {backend_name}
æ¨¡å‹: {default_model}
æ‰§è¡Œå±‚çº§: Layer {1/2/3}

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: ~rlm spawn å¯åŠ¨ä»£ç†
```

---

### ~rlm reload

é‡æ–°åŠ è½½ AGENTS.md è§„åˆ™ï¼ˆå‹ç¼©åæ¢å¤ï¼‰ã€‚

**è§¦å‘:**
- æ”¶åˆ° "context compacted" æç¤º
- ç”¨æˆ·è¯´ "é‡æ–°åŠ è½½è§„åˆ™"
- æ‰‹åŠ¨æ‰§è¡Œ `~rlm reload`

**æµç¨‹:**
1. é‡æ–°è¯»å– AGENTS.md
2. é‡æ–°è¯»å–å½“å‰ tasks.mdï¼ˆå¦‚æœ‰ï¼‰
3. è¾“å‡º: "ğŸ“‹ è§„åˆ™æ¢å¤å®Œæˆ - HelloAGENTS å·²é‡æ–°åŠ è½½"

---

### ~rlm spawn <role> <task>

æ‰‹åŠ¨å¯åŠ¨æŒ‡å®šè§’è‰²çš„å­ä»£ç†æ‰§è¡Œä»»åŠ¡ã€‚

**å‚æ•°:**
- `role`: è§’è‰²åç§°ï¼ˆexplorer/analyzer/implementer/reviewer/tester/synthesizerï¼‰
- `task`: ä»»åŠ¡æè¿°ï¼ˆç”¨å¼•å·åŒ…è£¹ï¼‰

**æ‰§è¡Œæ­¥éª¤:**

1. éªŒè¯è§’è‰²åç§°æœ‰æ•ˆæ€§
2. åŠ è½½è§’è‰²é¢„è®¾æ–‡ä»¶
3. å‡†å¤‡ä¸Šä¸‹æ–‡ï¼ˆæŠ˜å åä¼ é€’ï¼‰
4. å¯åŠ¨å­ä»£ç†
5. ç­‰å¾…æ‰§è¡Œå®Œæˆ
6. æŠ˜å ç»“æœè¿”å›

**ç¤ºä¾‹:**
```bash
~rlm spawn explorer "åˆ†æé¡¹ç›®çš„ç›®å½•ç»“æ„å’Œä¾èµ–å…³ç³»"
~rlm spawn analyzer "è¯„ä¼° src/api/ æ¨¡å—çš„ä»£ç è´¨é‡"
~rlm spawn implementer "å®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½"
```

**è¾“å‡ºæ ¼å¼:**
```
ğŸ”µã€HelloAGENTSã€‘- RLM: spawn_agent

æ­£åœ¨å¯åŠ¨å­ä»£ç†...
- è§’è‰²: {role}
- ä»»åŠ¡: {task}
- æ·±åº¦: {depth}

{æ‰§è¡Œè¿‡ç¨‹è¾“å‡º}

## ä»£ç†ç»“æœ
- çŠ¶æ€: {status}
- å…³é”®å‘ç°:
  {key_findings}
- å˜æ›´:
  {changes_made}
- å»ºè®®:
  {recommendations}

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: ç»§ç»­ä»»åŠ¡ | ~rlm spawn å¯åŠ¨å…¶ä»–ä»£ç†
```

---

### ~rlm fold [strategy]

æ‰‹åŠ¨è§¦å‘ä¸Šä¸‹æ–‡æŠ˜å ã€‚

**å‚æ•°:**
- `strategy`: æŠ˜å ç­–ç•¥ï¼ˆå¯é€‰ï¼‰
  - `aggressive`: æ¿€è¿›æŠ˜å ï¼ˆä¿ç•™10%ï¼‰
  - `balanced`: å¹³è¡¡æŠ˜å ï¼ˆä¿ç•™25%ï¼Œé»˜è®¤ï¼‰
  - `conservative`: ä¿å®ˆæŠ˜å ï¼ˆä¿ç•™50%ï¼‰

**æ‰§è¡Œæ­¥éª¤:**

1. è·å–å½“å‰ä¸Šä¸‹æ–‡çŠ¶æ€
2. æ ¹æ®ç­–ç•¥è®¡ç®—æŠ˜å ç›®æ ‡
3. æå–å…³é”®ä¿¡æ¯
4. æ‰§è¡ŒæŠ˜å 
5. éªŒè¯ä¿¡æ¯å®Œæ•´æ€§
6. è¾“å‡ºæŠ˜å æŠ¥å‘Š

**è¾“å‡ºæ ¼å¼:**
```
ğŸ”µã€HelloAGENTSã€‘- RLM: fold

## æŠ˜å æŠ¥å‘Š
- ç­–ç•¥: {strategy}
- Working Context: {before} â†’ {after} ({reduction}% å‹ç¼©)
- Session Events: {before} â†’ {after} ({reduction}% å‹ç¼©)

## ä¿ç•™çš„å…³é”®ä¿¡æ¯
{key_points_list}

## æŠ˜å çš„å†…å®¹æ‘˜è¦
{folded_summary}

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: ~rlm context æŸ¥çœ‹è¯¦æƒ… | ç»§ç»­ä»»åŠ¡
```

---

### ~rlm context

æ˜¾ç¤ºä¸‰å±‚ä¸Šä¸‹æ–‡çš„è¯¦ç»†çŠ¶æ€ã€‚

**æ‰§è¡Œæ­¥éª¤:**

1. è·å–å„å±‚ä¸Šä¸‹æ–‡å†…å®¹
2. ç»Ÿè®¡tokenä½¿ç”¨
3. åˆ—å‡ºå…³é”®æ¡ç›®
4. æ ¼å¼åŒ–è¾“å‡º

**è¾“å‡ºæ ¼å¼:**
```
ğŸ”µã€HelloAGENTSã€‘- RLM: context

## Working Context ({size} tokens)
å½“å‰ä»»åŠ¡: {current_task}
æ´»è·ƒå†…å®¹:
{working_items}

## Session Events ({size} tokens)
äº‹ä»¶æ•°é‡: {event_count}
æœ€è¿‘äº‹ä»¶:
{recent_events}

## Memory & Artifacts
çŸ¥è¯†åº“çŠ¶æ€: {kb_status}
å·²åŠ è½½æ–‡ä»¶:
{loaded_files}

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: ~rlm fold å‹ç¼©ä¸Šä¸‹æ–‡ | peek() æŸ¥è¯¢ç‰¹å®šå†…å®¹
```

---

### ~rlm history

æ˜¾ç¤ºä»£ç†æ‰§è¡Œå†å²ã€‚

**æ‰§è¡Œæ­¥éª¤:**

1. è·å–å†å²è®°å½•
2. æŒ‰æ—¶é—´æ’åº
3. æ±‡æ€»ç»Ÿè®¡
4. æ ¼å¼åŒ–è¾“å‡º

**è¾“å‡ºæ ¼å¼:**
```
ğŸ”µã€HelloAGENTSã€‘- RLM: history

## æ‰§è¡Œç»Ÿè®¡
- æ€»ä»£ç†æ•°: {total}
- æˆåŠŸ: {success} | å¤±è´¥: {failed} | éƒ¨åˆ†å®Œæˆ: {partial}
- å¹³å‡æ‰§è¡Œæ—¶é—´: {avg_time}

## æ‰§è¡Œå†å²
| æ—¶é—´ | è§’è‰² | ä»»åŠ¡ | çŠ¶æ€ | æ·±åº¦ |
|------|------|------|------|------|
{history_rows}

## æœ€è¿‘ç»“æœæ‘˜è¦
{recent_results}

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: ~rlm spawn å¯åŠ¨æ–°ä»£ç† | ~rlm reset æ¸…é™¤å†å²
```

---

### ~rlm reset

é‡ç½®RLMçŠ¶æ€ã€‚

**æ‰§è¡Œæ­¥éª¤:**

1. ç¡®è®¤é‡ç½®æ“ä½œ
2. æ¸…é™¤æ´»è·ƒä»£ç†
3. é‡ç½®ä¸Šä¸‹æ–‡å±‚
4. æ¸…é™¤æ‰§è¡Œå†å²
5. æ¢å¤é»˜è®¤é…ç½®

**ç¡®è®¤æç¤º:**
```
â“ã€HelloAGENTSã€‘- RLM: reset

å³å°†é‡ç½®RLMçŠ¶æ€ï¼Œè¿™å°†:
- ç»ˆæ­¢æ‰€æœ‰æ´»è·ƒä»£ç†
- æ¸…é™¤ Working Context
- æ¸…é™¤ Session Eventsï¼ˆä¿ç•™ Memoryï¼‰
- æ¸…é™¤æ‰§è¡Œå†å²

è¯·ç¡®è®¤:
1. âœ… ç¡®è®¤é‡ç½®
2. âŒ å–æ¶ˆ

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: é€‰æ‹©æ“ä½œ
```

**é‡ç½®å®Œæˆ:**
```
âœ…ã€HelloAGENTSã€‘- RLM: reset

RLMçŠ¶æ€å·²é‡ç½®:
- æ¨¡å¼: STANDARD
- æ·±åº¦: 0
- ä¸Šä¸‹æ–‡: å·²æ¸…é™¤
- å†å²: å·²æ¸…é™¤

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: ~rlm spawn å¯åŠ¨æ–°ä»»åŠ¡
```

---

### ~rlm session

æ˜¾ç¤ºå½“å‰ Session ä¿¡æ¯ã€‚

**æ‰§è¡Œæ­¥éª¤:**

1. è·å–å½“å‰ Session IDï¼ˆä»ç¯å¢ƒå˜é‡æˆ–è‡ªåŠ¨ç”Ÿæˆï¼‰
2. è¯»å– Session å…ƒæ•°æ®
3. ç»Ÿè®¡äº‹ä»¶å’Œä»£ç†å†å²
4. æ ¼å¼åŒ–è¾“å‡º

**å‘½ä»¤è°ƒç”¨:**
```bash
python -X utf8 "{SKILL_ROOT}/rlm/session.py" --info
```

**è¾“å‡ºæ ¼å¼:**
```
ğŸ”µã€HelloAGENTSã€‘- RLM: session

## å½“å‰ Session
- Session ID: {session_id}
- åˆ›å»ºæ—¶é—´: {created_at}
- æœ€åæ´»è·ƒ: {last_active}
- Session ç›®å½•: {session_dir}

## ç»Ÿè®¡
- äº‹ä»¶æ•°: {total_events}
- ä»£ç†æ‰§è¡Œæ•°: {agent_count}

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: ~rlm history æŸ¥çœ‹è¯¦æƒ… | ~rlm sessions åˆ—å‡ºæ‰€æœ‰
```

---

### ~rlm sessions

åˆ—å‡ºæ‰€æœ‰ Sessionsã€‚

**æ‰§è¡Œæ­¥éª¤:**

1. æ‰«æ Session æ ¹ç›®å½•
2. è¯»å–å„ Session å…ƒæ•°æ®
3. æŒ‰æœ€åæ´»è·ƒæ—¶é—´æ’åº
4. æ ¼å¼åŒ–è¾“å‡º

**å‘½ä»¤è°ƒç”¨:**
```bash
python -X utf8 "{SKILL_ROOT}/rlm/session.py" --list
```

**è¾“å‡ºæ ¼å¼:**
```
ğŸ”µã€HelloAGENTSã€‘- RLM: sessions

## æ´»è·ƒ Sessions
| Session ID | åˆ›å»ºæ—¶é—´ | æœ€åæ´»è·ƒ |
|------------|----------|----------|
{session_rows}

## æ¸…ç†å»ºè®®
è¿è¡Œ `~rlm cleanup 24` æ¸…ç†è¶…è¿‡24å°æ—¶çš„æ—§ Sessions

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: ~rlm session æŸ¥çœ‹å½“å‰ | ~rlm cleanup æ¸…ç†æ—§ Sessions
```

---

### ~rlm cleanup [hours]

æ¸…ç†è¿‡æœŸ Sessionsã€‚

**å‚æ•°:**
- `hours`: æ¸…ç†è¶…è¿‡ N å°æ—¶çš„ Sessionsï¼ˆé»˜è®¤ 24ï¼‰

**å‘½ä»¤è°ƒç”¨:**
```bash
python -X utf8 "{SKILL_ROOT}/rlm/session.py" --cleanup {hours}
```

**è¾“å‡ºæ ¼å¼:**
```
âœ…ã€HelloAGENTSã€‘- RLM: cleanup

å·²æ¸…ç† {cleaned} ä¸ªè¿‡æœŸ Sessions
ä¿ç•™å½“å‰ Session: {current_session_id}

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: ~rlm sessions æŸ¥çœ‹å‰©ä½™ Sessions
```

---

## è‡ªåŠ¨è§¦å‘è§„åˆ™

```yaml
è‡ªåŠ¨å¯ç”¨RLMæ¡ä»¶:
  å¤æ‚åº¦æ£€æµ‹:
    - ä»»åŠ¡æè¿°åŒ…å«"åˆ†æå¹¶å®ç°"ã€"å…¨é¢å®¡æŸ¥"ç­‰å¤åˆæ„å›¾
    - é¢„ä¼°æ”¹åŠ¨è¶…è¿‡3ä¸ªæ–‡ä»¶æˆ–100è¡Œä»£ç 
    - æ¶‰åŠå¤šä¸ªæŠ€æœ¯é¢†åŸŸ

  ç”¨æˆ·åå¥½:
    - ç”¨æˆ·åœ¨é¡¹ç›®é…ç½®ä¸­å¯ç”¨ RLM_AUTO: true
    - ç”¨æˆ·åœ¨ä¼šè¯ä¸­è¯·æ±‚"ä½¿ç”¨é€’å½’æ¨¡å¼"

è‡ªåŠ¨æ¨¡å¼é€‰æ‹©:
  RECURSIVE:
    - éœ€è¦ä¸“ä¸šè§’è‰²åˆ†å·¥
    - ä»»åŠ¡æœ‰æ˜ç¡®çš„åˆ†è§£ç»“æ„

  PARALLEL:
    - å¤šä¸ªç‹¬ç«‹å­ä»»åŠ¡
    - æ— ä¾èµ–å…³ç³»çš„åˆ†æä»»åŠ¡
```

---

## é”™è¯¯å¤„ç†

```yaml
å¸¸è§é”™è¯¯:

  è§’è‰²ä¸å­˜åœ¨:
    é”™è¯¯: "Unknown role: {role}"
    å¤„ç†: æ˜¾ç¤ºå¯ç”¨è§’è‰²åˆ—è¡¨

  é€’å½’æ·±åº¦è¶…é™:
    é”™è¯¯: "Max recursion depth exceeded"
    å¤„ç†: è‡ªåŠ¨æŠ˜å å½“å‰å±‚ï¼Œè¿”å›ä¸Šå±‚ç»§ç»­

  ä»£ç†è¶…æ—¶:
    é”™è¯¯: "Agent timeout after {timeout}s"
    å¤„ç†: è¿”å›éƒ¨åˆ†ç»“æœï¼Œè¯¢é—®æ˜¯å¦é‡è¯•

  ä¸Šä¸‹æ–‡æº¢å‡º:
    é”™è¯¯: "Context overflow in {layer}"
    å¤„ç†: è‡ªåŠ¨è§¦å‘æŠ˜å ï¼Œç»§ç»­æ‰§è¡Œ
```

---

## ç”¨æˆ·é€‰æ‹©å¤„ç†

```yaml
spawn è§’è‰²é€‰æ‹©ï¼ˆè§’è‰²æ— æ•ˆæ—¶ï¼‰:
  å†…å®¹è¦ç´ :
    - å¯ç”¨è§’è‰²åˆ—è¡¨åŠè¯´æ˜
    - æ¯ä¸ªè§’è‰²çš„å…¸å‹ä»»åŠ¡
  é€‰é¡¹:
    1. explorer - ä»£ç åº“æ¢ç´¢
    2. analyzer - æ·±åº¦åˆ†æ
    3. implementer - ä»£ç å®ç°
    4. reviewer - ä»£ç å®¡æŸ¥
    5. tester - æµ‹è¯•è®¾è®¡
    6. synthesizer - ç»“æœç»¼åˆ
    7. å–æ¶ˆ

reset ç¡®è®¤:
  å†…å®¹è¦ç´ :
    - é‡ç½®å½±å“è¯´æ˜
    - å½“å‰çŠ¶æ€æ‘˜è¦
  é€‰é¡¹:
    1. ç¡®è®¤é‡ç½®
    2. å–æ¶ˆ

ä»£ç†å¤±è´¥å¤„ç†:
  å†…å®¹è¦ç´ :
    - é”™è¯¯ä¿¡æ¯
    - éƒ¨åˆ†ç»“æœï¼ˆå¦‚æœ‰ï¼‰
  é€‰é¡¹:
    1. é‡è¯•
    2. è·³è¿‡ç»§ç»­
    3. ç»ˆæ­¢ä»»åŠ¡
```

---

## ä¸å…¶ä»–å‘½ä»¤çš„å…³ç³»

```yaml
å‘½ä»¤é›†æˆ:
  ~auto:
    - å¤æ‚ä»»åŠ¡è‡ªåŠ¨å¯ç”¨RLM
    - ä½¿ç”¨Sequential Chainæ¨¡å¼

  ~plan:
    - æ–¹æ¡ˆè§„åˆ’é˜¶æ®µå¯ç”¨analyzerè§’è‰²
    - å¤šæ–¹æ¡ˆå¯¹æ¯”å¯ç”¨Parallelæ¨¡å¼

  ~review:
    - è‡ªåŠ¨è°ƒç”¨reviewerè§’è‰²
    - å¤§å‹å®¡æŸ¥ä½¿ç”¨Divide & Conquer

  ~test:
    - è‡ªåŠ¨è°ƒç”¨testerè§’è‰²
    - æµ‹è¯•è®¾è®¡å’Œæ‰§è¡Œåˆ†ç¦»

çŠ¶æ€ä¿æŠ¤:
  - RLMçŠ¶æ€ç‹¬ç«‹äºHelloAGENTSæµç¨‹çŠ¶æ€
  - å‘½ä»¤æ‰§è¡Œå®ŒæˆåRLMçŠ¶æ€ä¿ç•™
  - ~rlm reset æ˜¾å¼æ¸…é™¤
```

---

## å¤šç»ˆç«¯åä½œæ¨¡å¼

```yaml
è®¾è®¡ç†å¿µ:
  é»˜è®¤è¡Œä¸º: éš”ç¦»æ¨¡å¼ï¼Œæ¯ä¸ªç»ˆç«¯ç‹¬ç«‹
  åä½œæ¨¡å¼: é€šè¿‡ç¯å¢ƒå˜é‡æ˜¾å¼å¯ç”¨

å¯ç”¨æ–¹å¼:
  Windows PowerShell:
    $env:hellotasks="my-task-list"; <AI CLI å‘½ä»¤>

  Windows CMD:
    set hellotasks=my-task-list && <AI CLI å‘½ä»¤>

  Linux/macOS:
    hellotasks=my-task-list <AI CLI å‘½ä»¤>

  ç¤ºä¾‹:
    hellotasks=auth-migration codex      # Codex CLI
    hellotasks=auth-migration claude     # Claude Code

ä»»åŠ¡å­˜å‚¨:
  ä½ç½®: {é¡¹ç›®ç›®å½•}/helloagents/tasks/{list_id}.json
  æ ¼å¼: JSON æ•°ç»„ï¼ŒåŒ…å«ä»»åŠ¡å¯¹è±¡
  é”æœºåˆ¶: æ–‡ä»¶é”é˜²æ­¢å¹¶å‘å†™å…¥å†²çª
```

---

### ~rlm tasks

æ˜¾ç¤ºå…±äº«ä»»åŠ¡åˆ—è¡¨çŠ¶æ€å’Œæ‰€æœ‰ä»»åŠ¡ã€‚

**å‰ææ¡ä»¶:** éœ€è®¾ç½® `hellotasks` ç¯å¢ƒå˜é‡

**æ‰§è¡Œæ­¥éª¤:**

1. æ£€æŸ¥æ˜¯å¦ä¸ºåä½œæ¨¡å¼
2. è¯»å–ä»»åŠ¡åˆ—è¡¨æ–‡ä»¶
3. ç»Ÿè®¡å„çŠ¶æ€ä»»åŠ¡æ•°é‡
4. æ ¼å¼åŒ–è¾“å‡º

**å‘½ä»¤è°ƒç”¨:**
```bash
python -X utf8 "{SKILL_ROOT}/rlm/shared_tasks.py" --status
python -X utf8 "{SKILL_ROOT}/rlm/shared_tasks.py" --list
```

**è¾“å‡ºæ ¼å¼:**
```
ğŸ”µã€HelloAGENTSã€‘- RLM: tasks

## åä½œæ¨¡å¼çŠ¶æ€
- ä»»åŠ¡åˆ—è¡¨ ID: {list_id}
- å­˜å‚¨ä½ç½®: {tasks_file}
- æœ€åæ›´æ–°: {last_updated}

## ä»»åŠ¡ç»Ÿè®¡
| çŠ¶æ€ | æ•°é‡ |
|------|------|
| å¾…å¤„ç† | {pending} |
| è¿›è¡Œä¸­ | {in_progress} |
| å·²å®Œæˆ | {completed} |
| è¢«é˜»å¡ | {blocked} |

## ä»»åŠ¡åˆ—è¡¨
| ID | æ ‡é¢˜ | çŠ¶æ€ | è´Ÿè´£äºº | é˜»å¡é¡¹ |
|----|------|------|--------|--------|
{task_rows}

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: ~rlm tasks available æŸ¥çœ‹å¯è®¤é¢† | ~rlm tasks claim <id> è®¤é¢†ä»»åŠ¡
```

**éåä½œæ¨¡å¼è¾“å‡º:**
```
âš ï¸ã€HelloAGENTSã€‘- RLM: tasks

å½“å‰ä¸ºéš”ç¦»æ¨¡å¼ï¼Œæœªå¯ç”¨å¤šç»ˆç«¯åä½œã€‚

å¯ç”¨æ–¹æ³•:
  hellotasks=my-task-list <AI CLI å‘½ä»¤>

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: è®¾ç½®ç¯å¢ƒå˜é‡åé‡æ–°å¯åŠ¨
```

---

### ~rlm tasks available

æ˜¾ç¤ºå¯è®¤é¢†çš„ä»»åŠ¡ï¼ˆæœªè¢«è®¤é¢†ä¸”æ— é˜»å¡ä¾èµ–ï¼‰ã€‚

**æ‰§è¡Œæ­¥éª¤:**

1. è·å–æ‰€æœ‰ä»»åŠ¡
2. è¿‡æ»¤: status=pending, owner=null, blocked_by=[]
3. æ ¼å¼åŒ–è¾“å‡º

**å‘½ä»¤è°ƒç”¨:**
```bash
python -X utf8 "{SKILL_ROOT}/rlm/shared_tasks.py" --available
```

**è¾“å‡ºæ ¼å¼:**
```
ğŸ”µã€HelloAGENTSã€‘- RLM: tasks available

## å¯è®¤é¢†ä»»åŠ¡ ({count} ä¸ª)
| ID | æ ‡é¢˜ | åˆ›å»ºæ—¶é—´ |
|----|------|----------|
{available_task_rows}

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: ~rlm tasks claim <task_id> è®¤é¢†ä»»åŠ¡
```

**æ— å¯ç”¨ä»»åŠ¡:**
```
ğŸ”µã€HelloAGENTSã€‘- RLM: tasks available

å½“å‰æ— å¯è®¤é¢†ä»»åŠ¡ã€‚

å¯èƒ½åŸå› :
- æ‰€æœ‰ä»»åŠ¡å·²è¢«è®¤é¢†
- å‰©ä½™ä»»åŠ¡æœ‰æœªå®Œæˆçš„ä¾èµ–

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: ~rlm tasks æŸ¥çœ‹å®Œæ•´åˆ—è¡¨
```

---

### ~rlm tasks claim <task_id>

è®¤é¢†æŒ‡å®šä»»åŠ¡ã€‚

**å‚æ•°:**
- `task_id`: è¦è®¤é¢†çš„ä»»åŠ¡ ID

**æ‰§è¡Œæ­¥éª¤:**

1. éªŒè¯ä»»åŠ¡å­˜åœ¨
2. æ£€æŸ¥æ˜¯å¦å·²è¢«ä»–äººè®¤é¢†
3. æ£€æŸ¥æ˜¯å¦æœ‰æœªå®Œæˆçš„ä¾èµ–
4. è®¾ç½® owner å’Œ status=in_progress
5. å†™å…¥æ›´æ–°

**å‘½ä»¤è°ƒç”¨:**
```bash
python -X utf8 "{SKILL_ROOT}/rlm/shared_tasks.py" --claim {task_id} --owner {session_id}
```

**æˆåŠŸè¾“å‡º:**
```
âœ…ã€HelloAGENTSã€‘- RLM: tasks claim

ä»»åŠ¡è®¤é¢†æˆåŠŸï¼
- ä»»åŠ¡ ID: {task_id}
- æ ‡é¢˜: {subject}
- çŠ¶æ€: in_progress

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: å¼€å§‹æ‰§è¡Œä»»åŠ¡ | ~rlm tasks complete {task_id} å®Œæˆåæ ‡è®°
```

**å¤±è´¥è¾“å‡ºï¼ˆå·²è¢«è®¤é¢†ï¼‰:**
```
âŒã€HelloAGENTSã€‘- RLM: tasks claim

è®¤é¢†å¤±è´¥: ä»»åŠ¡å·²è¢«ä»–äººè®¤é¢†
- ä»»åŠ¡ ID: {task_id}
- å½“å‰è´Ÿè´£äºº: {owner}

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: ~rlm tasks available æŸ¥çœ‹å…¶ä»–å¯è®¤é¢†ä»»åŠ¡
```

**å¤±è´¥è¾“å‡ºï¼ˆæœ‰ä¾èµ–é˜»å¡ï¼‰:**
```
âŒã€HelloAGENTSã€‘- RLM: tasks claim

è®¤é¢†å¤±è´¥: ä»»åŠ¡æœ‰æœªå®Œæˆçš„ä¾èµ–
- ä»»åŠ¡ ID: {task_id}
- é˜»å¡é¡¹: {blocked_by_list}

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: ç­‰å¾…ä¾èµ–ä»»åŠ¡å®Œæˆï¼Œæˆ– ~rlm tasks available æŸ¥çœ‹å…¶ä»–ä»»åŠ¡
```

---

### ~rlm tasks complete <task_id>

æ ‡è®°ä»»åŠ¡ä¸ºå·²å®Œæˆï¼Œå¹¶è‡ªåŠ¨è§£é™¤ä¾èµ–ã€‚

**å‚æ•°:**
- `task_id`: è¦æ ‡è®°å®Œæˆçš„ä»»åŠ¡ ID

**æ‰§è¡Œæ­¥éª¤:**

1. éªŒè¯ä»»åŠ¡å­˜åœ¨
2. éªŒè¯å½“å‰ç»ˆç«¯æ˜¯ä»»åŠ¡è´Ÿè´£äºº
3. æ›´æ–° status=completed
4. è‡ªåŠ¨è§£é™¤ä¾èµ–: ä»å…¶ä»–ä»»åŠ¡çš„ blocked_by ä¸­ç§»é™¤æ­¤ä»»åŠ¡
5. å†™å…¥æ›´æ–°

**å‘½ä»¤è°ƒç”¨:**
```bash
python -X utf8 "{SKILL_ROOT}/rlm/shared_tasks.py" --complete {task_id}
```

**æˆåŠŸè¾“å‡º:**
```
âœ…ã€HelloAGENTSã€‘- RLM: tasks complete

ä»»åŠ¡å·²å®Œæˆï¼
- ä»»åŠ¡ ID: {task_id}
- æ ‡é¢˜: {subject}

## ä¾èµ–è§£é™¤
ä»¥ä¸‹ä»»åŠ¡çš„é˜»å¡å·²è§£é™¤:
{unblocked_tasks_list}

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: ~rlm tasks available æŸ¥çœ‹æ–°çš„å¯è®¤é¢†ä»»åŠ¡
```

---

### ~rlm tasks add "<subject>"

æ·»åŠ æ–°ä»»åŠ¡åˆ°å…±äº«åˆ—è¡¨ã€‚

**å‚æ•°:**
- `subject`: ä»»åŠ¡æ ‡é¢˜ï¼ˆç”¨å¼•å·åŒ…è£¹ï¼‰

**å¯é€‰å‚æ•°:**
- `--blocked-by <task_ids>`: ä¾èµ–çš„ä»»åŠ¡ IDï¼ˆé€—å·åˆ†éš”ï¼‰

**æ‰§è¡Œæ­¥éª¤:**

1. ç”Ÿæˆå”¯ä¸€ä»»åŠ¡ ID
2. åˆ›å»ºä»»åŠ¡å¯¹è±¡
3. å†™å…¥ä»»åŠ¡åˆ—è¡¨
4. è¿”å›æ–°ä»»åŠ¡ ID

**å‘½ä»¤è°ƒç”¨:**
```bash
python -X utf8 "{SKILL_ROOT}/rlm/shared_tasks.py" --add "{subject}"
```

**è¾“å‡ºæ ¼å¼:**
```
âœ…ã€HelloAGENTSã€‘- RLM: tasks add

ä»»åŠ¡å·²æ·»åŠ ï¼
- ä»»åŠ¡ ID: {task_id}
- æ ‡é¢˜: {subject}
- çŠ¶æ€: pending

â”€â”€â”€â”€
ğŸ”„ ä¸‹ä¸€æ­¥: ~rlm tasks claim {task_id} è®¤é¢†ä»»åŠ¡
```

---

## åä½œæ¨¡å¼ä½¿ç”¨ç¤ºä¾‹

```yaml
åœºæ™¯: ä¸¤ä¸ªç»ˆç«¯åä½œå®Œæˆè®¤è¯è¿ç§»

ç»ˆç«¯ A (è´Ÿè´£ä»£ç ä¿®æ”¹):
  å¯åŠ¨: hellotasks=auth-migration <AI CLI>
  # ä¾‹: hellotasks=auth-migration codex æˆ– claude
  æ“ä½œ:
    1. ~rlm tasks add "è¿ç§»ç”¨æˆ·è¡¨ schema"
    2. ~rlm tasks add "æ›´æ–° API ç«¯ç‚¹" --blocked-by t1_xxx
    3. ~rlm tasks add "ç¼–å†™è¿ç§»è„šæœ¬"
    4. ~rlm tasks claim t1_xxx
    5. (æ‰§è¡Œè¿ç§»)
    6. ~rlm tasks complete t1_xxx

ç»ˆç«¯ B (è´Ÿè´£æµ‹è¯•å’Œæ–‡æ¡£):
  å¯åŠ¨: hellotasks=auth-migration <AI CLI>
  # å¯ä»¥å’Œç»ˆç«¯ A ä½¿ç”¨ä¸åŒçš„ CLIï¼Œåªè¦ hellotasks ID ç›¸åŒå³å¯
  æ“ä½œ:
    1. ~rlm tasks  # æŸ¥çœ‹ A åˆ›å»ºçš„ä»»åŠ¡
    2. ~rlm tasks add "ç¼–å†™é›†æˆæµ‹è¯•" --blocked-by t1_xxx
    3. ~rlm tasks add "æ›´æ–° API æ–‡æ¡£" --blocked-by t2_xxx
    4. ~rlm tasks available  # ç­‰å¾… t1 å®Œæˆ
    5. (t1 å®Œæˆåè‡ªåŠ¨è§£é”)
    6. ~rlm tasks claim t4_xxx  # å¼€å§‹æµ‹è¯•ä»»åŠ¡

åŒæ­¥æœºåˆ¶:
  - A å®Œæˆ t1 åï¼ŒB ç«‹å³çœ‹åˆ° t4 å˜ä¸ºå¯è®¤é¢†
  - ä»»åŠ¡çŠ¶æ€å®æ—¶åŒæ­¥ï¼ˆåŸºäºæ–‡ä»¶ï¼‰
  - æ— éœ€æ‰‹åŠ¨åˆ·æ–°
```

---

## åä½œæ¨¡å¼é”™è¯¯å¤„ç†

```yaml
å¸¸è§é”™è¯¯:

  æœªå¯ç”¨åä½œæ¨¡å¼:
    é”™è¯¯: "å½“å‰ä¸ºéš”ç¦»æ¨¡å¼"
    å¤„ç†: æç¤ºè®¾ç½®ç¯å¢ƒå˜é‡å¹¶é‡å¯

  ä»»åŠ¡ä¸å­˜åœ¨:
    é”™è¯¯: "Task not found: {task_id}"
    å¤„ç†: æ˜¾ç¤ºå¯ç”¨ä»»åŠ¡åˆ—è¡¨

  å¹¶å‘å†™å…¥å†²çª:
    é”™è¯¯: "Failed to acquire lock"
    å¤„ç†: è‡ªåŠ¨é‡è¯• 3 æ¬¡ï¼Œé—´éš” 100ms

  æƒé™ä¸è¶³:
    é”™è¯¯: "Cannot complete task: not the owner"
    å¤„ç†: æ˜¾ç¤ºå½“å‰è´Ÿè´£äººä¿¡æ¯
```
