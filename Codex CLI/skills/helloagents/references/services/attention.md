# 注意力控制服务

---

## 活状态区格式

```markdown
<!-- LIVE_STATUS_BEGIN -->
状态: {running|paused|completed|failed} | 进度: {完成数}/{总数} ({百分比}%) | 更新: {HH:MM:SS}
当前: {正在执行的任务描述}
<!-- LIVE_STATUS_END -->
```

---

## 更新规则

```yaml
更新时机:
  - 任务开始执行时
  - 任务状态变更时（[ ] → [√] / [X] / [-]）
  - 遇到错误或阻断时
  - 阶段流转时

更新流程:
  任务开始:
    1. 活状态区: 状态=running, 当前={任务描述}
    2. 更新时间戳

  任务完成:
    1. 任务状态符号: [ ] → [√]
    2. 活状态区: 进度+1
    3. 执行日志: 添加记录
    4. 更新时间戳

  任务失败:
    1. 任务状态符号: [ ] → [X]
    2. 活状态区: 状态=failed
    3. 执行日志: 添加记录（含错误摘要）
    4. 更新时间戳

  全部完成:
    1. 活状态区: 状态=completed, 当前=-
    2. 执行日志: 添加完成记录
```

---

## 执行日志

```yaml
格式: | 时间 | 任务 | 状态 | 备注 |
位置: tasks.md 底部
容量: 最近 5 条
更新: 新记录追加到表格末尾
```

---

## 异常处理

```yaml
tasks.md 不存在: 跳过更新，标注 "⚠️ 无活动方案包"
tasks.md 格式错误: 重建 LIVE_STATUS 区域
更新失败: 记录错误，继续执行
```
